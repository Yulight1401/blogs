# blogs
>今天完成了一些基本要求，[前往demo](http://yulstudio.cn/lab/index.html);还需要细细的打磨一下，不过具体框架已经成型.
>2.今天花了一点点时间来尝试了新浪输入框,大概实现思路如下：
>(1).根据@定位的实现，采用一个不可见的div框,当输入@字符时，div框里面也加入相应的<span>标签，这个div和输入框是等宽登高的，这样通过span相对于div的offsetleft和offsettop就可以获得在textarea里面@字符与它的相对位置，这样弹出的选择框就有确定的位置了.
（2）.再者关于@字符以及后面的字符组成的用户名，我觉得用span "状态机"来实现，具体是：当输入@时,状态机记录@的位置,同时进入激活状态，监听输入的文字来筛选人物，弹出选择框,当选择后进入完成状态，插入字符加一个空格，同时记录字符串起始和结束的位置，当光标移到这里时，重新进入激活状态。(通过setSelectionRange来获取光标位置).如果途中光标移动，则状态机进入暂停状态，记录最后输入的起始位置和结束位置，当光标重新进入时，又再激活。封装为一个模块.
(3).选择框状态，当span状态机激活时，选择框也会被激活，同时监听window的keyup事件，来选择和输入.span暂停或者完成时，停止监听，隐藏.

####后一天
添加了动画资源，整体成型，同时我将把我的后端node代码上传到库中，[前往demo](http://yulstudio.cn/lab/index.html);
